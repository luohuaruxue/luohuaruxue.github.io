---
title: 解决linux磁盘无剩余空间的步骤
date: {}
published: true
---


### 执行 shell

* 先检查各个磁盘大小

```bash
du -sh /*
```

* 找到有异常大小的文件夹后(比如： /var)，查看空间满的文件系统的inodes消耗；

 如果还有大量inode可用，说明大文件占用空间，否则是可能大量小文件占用空间。

```bash
df  - i   /var
```

* 如果是大文件，直接查找大于2G（自定义）的文件

```bash
find /var -size +2000000k
```

* 如果是大量小文件，那么查找大量小文件所在目录

```
du | awk '$1>200000'
```

---------

**根据定位到具体文件，通常可以判断是哪个程序io疯了**

-----

a. 如果安装了iotop，那么直接执行

```
iotop
```
可以直接看占用的程序

b. 查看 iowait(示例： 8.3%wa)

```
top
```
c. 查看导致iowait跑高的进程

```	
 ps -aux
```
